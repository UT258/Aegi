<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AEGIS - Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
/* AEGIS Dashboard - Complete Styles */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --primary-color: #0a2e5c;
    --secondary-color: #00d4ff;
    --accent-color: #ff6b6b;
    --warning-color: #ffd93d;
    --success-color: #6bcf7f;
    --dark-bg: #05070e;
    --card-bg: #0f1627;
    --border-color: #1a2f4f;
    --text-primary: #e8f0ff;
    --text-secondary: #a8c5e8;
    --cyan: #00d4ff;
    --deep-blue: #0a2e5c;
    --light-cyan: #4dd9ff;
}

html {
    scroll-behavior: smooth;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, var(--dark-bg) 0%, #0d1a30 100%);
    color: var(--text-primary);
    line-height: 1.6;
    position: relative;
}

body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at 20% 50%, rgba(0, 212, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(10, 46, 92, 0.1) 0%, transparent 50%);
    pointer-events: none;
    z-index: -1;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

/* ===== HEADER ===== */
.navbar {
    background: linear-gradient(135deg, var(--primary-color) 0%, #051a3d 100%);
    border-bottom: 2px solid var(--secondary-color);
    position: sticky;
    top: 0;
    z-index: 1000;
    box-shadow: 0 4px 25px rgba(0, 212, 255, 0.2);
    backdrop-filter: blur(10px);
}

.navbar .container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
}

.navbar-brand h1 {
    font-size: 28px;
    font-weight: 700;
    color: var(--secondary-color);
    text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
    letter-spacing: 2px;
}

.navbar-brand p {
    font-size: 12px;
    color: var(--text-secondary);
    margin-top: 2px;
}

.navbar-links {
    display: flex;
    gap: 30px;
}

.navbar-links a {
    color: var(--text-secondary);
    text-decoration: none;
    font-weight: 500;
    padding: 8px 12px;
    border-radius: 4px;
    transition: all 0.3s ease;
}

.navbar-links a:hover {
    color: var(--secondary-color);
    background: rgba(0, 212, 255, 0.1);
    text-shadow: 0 0 8px rgba(0, 212, 255, 0.6);
}

/* ===== HERO SECTION ===== */
.hero {
    background: linear-gradient(135deg, rgba(10, 46, 92, 0.6) 0%, rgba(5, 7, 14, 0.8) 100%);
    padding: 80px 20px;
    text-align: center;
    border-bottom: 2px solid var(--secondary-color);
    position: relative;
    overflow: hidden;
}

.hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent 0%, rgba(0, 212, 255, 0.1) 50%, transparent 100%);
    animation: shimmer 3s infinite;
    pointer-events: none;
}

@keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

.hero h2 {
    font-size: 42px;
    margin-bottom: 15px;
    color: var(--secondary-color);
    text-shadow: 0 0 20px rgba(0, 212, 255, 0.4);
    position: relative;
    z-index: 1;
}

.hero p {
    font-size: 18px;
    color: var(--text-secondary);
    position: relative;
    z-index: 1;
}

/* ===== SECTIONS ===== */
.section {
    padding: 60px 20px;
    border-bottom: 1px solid var(--border-color);
}

.section h2 {
    text-align: center;
    font-size: 32px;
    margin-bottom: 50px;
    color: var(--secondary-color);
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* ===== STATUS SECTION ===== */
.status-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 30px;
}

.status-card {
    background: var(--card-bg);
    border-radius: 8px;
    border: 1px solid var(--border-color);
    overflow: hidden;
    box-shadow: 0 4px 25px rgba(0, 212, 255, 0.15);
    transition: all 0.3s ease;
    position: relative;
}

.status-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(0, 212, 255, 0.1), transparent);
    animation: cardGlow 2s infinite;
}

@keyframes cardGlow {
    0% { left: -100%; }
    100% { left: 100%; }
}

.status-header {
    background: linear-gradient(135deg, var(--primary-color), #051a3d);
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 2px solid var(--secondary-color);
    position: relative;
}

.status-header h3 {
    color: var(--secondary-color);
    margin: 0;
    font-size: 18px;
}

.status-badge {
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
}

.status-badge.online {
    background: rgba(0, 212, 255, 0.2);
    color: var(--secondary-color);
    box-shadow: 0 0 10px rgba(0, 212, 255, 0.4);
    animation: pulse 2s infinite;
}

.status-badge.excellent {
    background: rgba(107, 207, 127, 0.2);
    color: var(--success-color);
    box-shadow: 0 0 10px rgba(107, 207, 127, 0.4);
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { box-shadow: 0 0 10px rgba(0, 212, 255, 0.4); }
    50% { box-shadow: 0 0 20px rgba(0, 212, 255, 0.8); }
}

.status-content {
    padding: 25px;
}

.status-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 0;
    border-bottom: 1px solid var(--border-color);
}

.status-item:last-child {
    border-bottom: none;
}

.status-item label {
    color: var(--text-secondary);
    font-weight: 600;
}

.status-item span {
    color: var(--secondary-color);
    font-weight: 500;
}

.battery-bar {
    flex: 1;
    height: 8px;
    background: var(--border-color);
    border-radius: 4px;
    overflow: hidden;
    margin-left: 10px;
    min-width: 100px;
}

.battery-level {
    height: 100%;
    background: linear-gradient(90deg, var(--secondary-color), #27ae60);
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    color: var(--dark-bg);
    font-weight: 700;
}

/* ===== SENSOR DATA ===== */
.sensors-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 30px;
}

.sensor-card {
    background: var(--card-bg);
    padding: 30px;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    box-shadow: 0 4px 25px rgba(0, 212, 255, 0.15);
    position: relative;
    transition: all 0.3s ease;
}

.sensor-card:hover {
    border-color: var(--secondary-color);
    box-shadow: 0 4px 35px rgba(0, 212, 255, 0.25);
    transform: translateY(-2px);
}

.sensor-card h4 {
    color: var(--secondary-color);
    margin-bottom: 15px;
    font-size: 18px;
}

.sensor-value {
    font-size: 36px;
    font-weight: 700;
    color: var(--secondary-color);
    margin: 15px 0;
    text-shadow: 0 0 15px rgba(0, 212, 255, 0.5);
    animation: dataFlip 0.6s ease;
}

@keyframes dataFlip {
    0% { opacity: 0.6; transform: scale(0.95); }
    100% { opacity: 1; transform: scale(1); }
}

.sensor-card canvas {
    width: 100%;
    max-height: 200px;
    margin-top: 20px;
}

/* ===== ALERT SECTION ===== */
.alert-history {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.alert-item {
    background: var(--card-bg);
    padding: 20px;
    border-radius: 6px;
    border-left: 4px solid var(--secondary-color);
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 15px;
    align-items: center;
    position: relative;
    overflow: hidden;
}

.alert-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background: linear-gradient(180deg, var(--secondary-color), transparent);
    animation: flowDown 2s infinite;
}

@keyframes flowDown {
    0% { top: -100%; }
    100% { top: 100%; }
}

.alert-item.info {
    border-left-color: var(--secondary-color);
    background: rgba(0, 212, 255, 0.05);
}

.alert-item.warning {
    border-left-color: var(--warning-color);
    background: rgba(255, 217, 61, 0.05);
}

.alert-item.success {
    border-left-color: var(--success-color);
    background: rgba(107, 207, 127, 0.05);
}

.alert-time {
    color: var(--text-secondary);
    font-size: 12px;
    font-weight: 600;
}

.alert-type {
    color: var(--text-primary);
    font-weight: 700;
}

.alert-location {
    color: var(--text-secondary);
    font-size: 13px;
    text-align: right;
}

/* ===== QUICK CONTROLS ===== */
.controls-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 20px;
}

.control-btn {
    background: var(--card-bg);
    border: 2px solid var(--border-color);
    color: var(--text-primary);
    padding: 30px 20px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    font-weight: 600;
    position: relative;
    overflow: hidden;
}

.control-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(0, 212, 255, 0.2), transparent);
    transition: 0.5s;
}

.control-btn:hover {
    border-color: var(--secondary-color);
    background: rgba(0, 212, 255, 0.1);
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0, 212, 255, 0.2);
}

.control-btn:hover::before {
    left: 100%;
}

.control-icon {
    font-size: 32px;
}

/* ===== ADVANCED FEATURES ===== */
.advanced-features {
    background: linear-gradient(135deg, rgba(26, 71, 42, 0.3) 0%, rgba(46, 204, 113, 0.1) 100%);
    border-top: 2px solid var(--secondary-color);
    border-bottom: 2px solid var(--secondary-color);
}

.advanced-btn {
    background: linear-gradient(135deg, var(--secondary-color) 0%, var(--light-cyan) 100%);
    border: 2px solid var(--secondary-color);
    transition: all 0.3s ease;
    color: var(--deep-blue) !important;
    font-weight: 700;
}

.advanced-btn:hover {
    background: linear-gradient(135deg, var(--light-cyan) 0%, var(--secondary-color) 100%);
    box-shadow: 0 6px 30px rgba(0, 212, 255, 0.5);
    transform: translateY(-3px);
}

.advanced-info {
    margin-top: 30px;
    padding: 15px 20px;
    background: rgba(0, 212, 255, 0.1);
    border-left: 4px solid var(--secondary-color);
    border-radius: 4px;
    text-align: center;
    color: var(--text-secondary);
    font-size: 14px;
    box-shadow: 0 0 15px rgba(0, 212, 255, 0.1);
}

/* ===== FOOTER ===== */
.footer {
    background: linear-gradient(135deg, var(--primary-color), #051a3d);
    border-top: 2px solid var(--secondary-color);
    padding: 40px 20px;
    text-align: center;
    color: var(--text-secondary);
    box-shadow: 0 -4px 25px rgba(0, 212, 255, 0.1);
}

.footer p {
    margin: 8px 0;
    font-size: 14px;
}

.footer p:first-child {
    color: var(--secondary-color);
    font-weight: 600;
    font-size: 16px;
}

/* ===== ANIMATIONS ===== */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideIn {
    from {
        transform: translateX(400px);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOut {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(400px);
        opacity: 0;
    }
}

.status-card,
.sensor-card,
.control-btn,
.alert-item {
    animation: fadeInUp 0.6s ease forwards;
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
    .navbar .container {
        flex-direction: column;
        gap: 15px;
    }

    .navbar-links {
        gap: 15px;
        flex-wrap: wrap;
        justify-content: center;
    }

    .hero h2 {
        font-size: 28px;
    }

    .section h2 {
        font-size: 24px;
        margin-bottom: 40px;
    }

    .alert-item {
        grid-template-columns: 1fr;
        gap: 8px;
    }

    .status-grid {
        grid-template-columns: 1fr;
    }

    .sensors-grid {
        grid-template-columns: 1fr;
    }

    .controls-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 480px) {
    .navbar-brand h1 {
        font-size: 20px;
    }

    .hero {
        padding: 60px 20px;
    }

    .hero h2 {
        font-size: 22px;
    }

    .section h2 {
        font-size: 20px;
    }

    .controls-grid {
        grid-template-columns: 1fr;
    }

    .status-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
    }
}

/* ===== SCROLLBAR ===== */
::-webkit-scrollbar {
    width: 10px;
}

::-webkit-scrollbar-track {
    background: var(--dark-bg);
}

::-webkit-scrollbar-thumb {
    background: var(--secondary-color);
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
}

::-webkit-scrollbar-thumb:hover {
    background: var(--light-cyan);
    box-shadow: 0 0 15px rgba(0, 212, 255, 0.8);
}
    </style>
</head>
<body>
    <!-- Navigation Header -->
    <header class="navbar">
        <div class="container">
            <div class="navbar-brand">
                <h1>‚öîÔ∏è AEGIS</h1>
                <p>Wearable Safety System Dashboard</p>
            </div>
            <nav class="navbar-links">
                <a href="#status">Status</a>
                <a href="#sensors">Sensors</a>
                <a href="#alerts">Alerts</a>
            </nav>
        </div>
    </header>

    <!-- Main Dashboard Container -->
    <main class="dashboard">
        <!-- Hero Section -->
        <section class="hero">
            <div class="container">
                <h2>Real-Time Monitoring Dashboard</h2>
                <p>AEGIS System Status & Control</p>
            </div>
        </section>

        <!-- System Status Section -->
        <section id="status" class="section">
            <div class="container">
                <h2>System Status Dashboard</h2>
                <div class="status-grid">
                    <!-- Helmet Module Status -->
                    <div class="status-card">
                        <div class="status-header">
                            <h3>üéñÔ∏è Helmet Module</h3>
                            <span class="status-badge online">ONLINE</span>
                        </div>
                        <div class="status-content">
                            <div class="status-item">
                                <label>Device ID:</label>
                                <span>ESP32-CAM-001</span>
                            </div>
                            <div class="status-item">
                                <label>Connection:</label>
                                <span>üì∂ Wi-Fi (92%)</span>
                            </div>
                            <div class="status-item">
                                <label>Battery:</label>
                                <div class="battery-bar">
                                    <div class="battery-level" style="width: 75%;">75%</div>
                                </div>
                            </div>
                            <div class="status-item">
                                <label>Status:</label>
                                <span>Operational</span>
                            </div>
                        </div>
                    </div>

                    <!-- Footwear Module Status -->
                    <div class="status-card">
                        <div class="status-header">
                            <h3>üëû Footwear Module</h3>
                            <span class="status-badge online">ONLINE</span>
                        </div>
                        <div class="status-content">
                            <div class="status-item">
                                <label>Device ID:</label>
                                <span>ESP8266-FOOT-002</span>
                            </div>
                            <div class="status-item">
                                <label>Connection:</label>
                                <span>üì∂ Wi-Fi (88%)</span>
                            </div>
                            <div class="status-item">
                                <label>Battery:</label>
                                <div class="battery-bar">
                                    <div class="battery-level" style="width: 68%;">68%</div>
                                </div>
                            </div>
                            <div class="status-item">
                                <label>Status:</label>
                                <span>Operational</span>
                            </div>
                        </div>
                    </div>

                    <!-- System Health -->
                    <div class="status-card">
                        <div class="status-header">
                            <h3>üíö System Health</h3>
                            <span class="status-badge excellent">HEALTHY</span>
                        </div>
                        <div class="status-content">
                            <div class="status-item">
                                <label>Overall Status:</label>
                                <span>All Systems Operational</span>
                            </div>
                            <div class="status-item">
                                <label>Detection Rate:</label>
                                <span>95%</span>
                            </div>
                            <div class="status-item">
                                <label>Response Time:</label>
                                <span>&lt; 3 seconds</span>
                            </div>
                            <div class="status-item">
                                <label>Uptime:</label>
                                <span>100%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sensor Data Section -->
        <section id="sensors" class="section">
            <div class="container">
                <h2>Real-Time Sensor Data</h2>
                <div class="sensors-grid">
                    <div class="sensor-card">
                        <h4>üå°Ô∏è Temperature</h4>
                        <div class="sensor-value" id="temp-value">28.5¬∞C</div>
                        <canvas id="tempChart"></canvas>
                    </div>
                    <div class="sensor-card">
                        <h4>üíß Humidity</h4>
                        <div class="sensor-value" id="humidity-value">65%</div>
                        <canvas id="humidityChart"></canvas>
                    </div>
                    <div class="sensor-card">
                        <h4>üí® Gas Level</h4>
                        <div class="sensor-value" id="gas-value">Safe</div>
                        <canvas id="gasChart"></canvas>
                    </div>
                    <div class="sensor-card">
                        <h4>üîó Metal Detection</h4>
                        <div class="sensor-value" id="metal-value">No Detection</div>
                        <canvas id="metalChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Alert History Section -->
        <section id="alerts" class="section">
            <div class="container">
                <h2>Alert History</h2>
                <div class="alert-history">
                    <div class="alert-item info">
                        <span class="alert-time">14:32:15</span>
                        <span class="alert-type">‚ö†Ô∏è METAL DETECTED</span>
                        <span class="alert-location">Footwear Module</span>
                    </div>
                    <div class="alert-item warning">
                        <span class="alert-time">13:45:22</span>
                        <span class="alert-type">‚ö° GAS LEVEL ELEVATED</span>
                        <span class="alert-location">Helmet Module</span>
                    </div>
                    <div class="alert-item info">
                        <span class="alert-time">13:20:10</span>
                        <span class="alert-type">üì∏ PHOTO CAPTURED</span>
                        <span class="alert-location">ESP32-CAM</span>
                    </div>
                    <div class="alert-item success">
                        <span class="alert-time">12:00:00</span>
                        <span class="alert-type">‚úÖ SYSTEM INITIALIZED</span>
                        <span class="alert-location">All Modules</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quick Controls Section -->
        <section class="section quick-controls">
            <div class="container">
                <h2>Quick Controls</h2>
                <div class="controls-grid">
                    <button class="control-btn" onclick="requestPhoto()">
                        <span class="control-icon">üì∏</span>
                        <span>Request Photo</span>
                    </button>
                    <button class="control-btn" onclick="testBuzzer()">
                        <span class="control-icon">üîî</span>
                        <span>Test Buzzer</span>
                    </button>
                    <button class="control-btn" onclick="startMonitoring()">
                        <span class="control-icon">‚ñ∂Ô∏è</span>
                        <span>Start Monitoring</span>
                    </button>
                    <button class="control-btn" onclick="stopMonitoring()">
                        <span class="control-icon">‚èπÔ∏è</span>
                        <span>Stop Monitoring</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Advanced Features Section -->
        <section class="section advanced-features">
            <div class="container">
                <h2>Advanced Features</h2>
                <div class="controls-grid">
                    <button class="control-btn advanced-btn" onclick="systemTest()">
                        <span class="control-icon">‚öôÔ∏è</span>
                        <span>System Test</span>
                    </button>
                    <button class="control-btn advanced-btn" onclick="downloadReport()">
                        <span class="control-icon">üì•</span>
                        <span>Download Report</span>
                    </button>
                    <button class="control-btn advanced-btn" onclick="exportLogs()">
                        <span class="control-icon">üì§</span>
                        <span>Export Logs</span>
                    </button>
                    <button class="control-btn advanced-btn" onclick="clearAlerts()">
                        <span class="control-icon">üóëÔ∏è</span>
                        <span>Clear Alerts</span>
                    </button>
                </div>
                <div class="advanced-info">
                    <p><strong>Keyboard Shortcuts:</strong> Ctrl+P (Photo) | Ctrl+T (Buzzer) | Ctrl+S (System Test) | Ctrl+L (Export Logs)</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 AEGIS Dashboard | Chandigarh Engineering College</p>
            <p>Advanced Explosive-detection & Gas-sensing Integrated Safetywear</p>
        </div>
    </footer>

    <script>
// AEGIS Dashboard - JavaScript with Advanced Features & Mock Data Simulation

// ===== MOCK DATA =====
const mockData = {
    devices: {
        helmet: {
            deviceId: 'ESP32-CAM-001',
            connection: { signal: 92, type: 'Wi-Fi' },
            battery: 75,
            status: 'Operational',
            lastUpdate: new Date()
        },
        footwear: {
            deviceId: 'ESP8266-FOOT-002',
            connection: { signal: 88, type: 'Wi-Fi' },
            battery: 68,
            status: 'Operational',
            lastUpdate: new Date()
        }
    },
    sensors: {
        temperature: 28.5,
        humidity: 65,
        gasLevel: 12,
        metalDetection: false
    },
    systemHealth: {
        status: 'HEALTHY',
        detectionRate: 95,
        responseTime: 2.8,
        uptime: 100
    },
    alerts: [
        { time: '14:32:15', type: 'METAL DETECTED', location: 'Footwear Module', class: 'info', icon: '‚ö†Ô∏è' },
        { time: '13:45:22', type: 'GAS LEVEL ELEVATED', location: 'Helmet Module', class: 'warning', icon: '‚ö°' },
        { time: '13:20:10', type: 'PHOTO CAPTURED', location: 'ESP32-CAM', class: 'info', icon: 'üì∏' },
        { time: '12:00:00', type: 'SYSTEM INITIALIZED', location: 'All Modules', class: 'success', icon: '‚úÖ' }
    ]
};

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
    initializeCharts();
    startRealTimeUpdates();
    addAnimationStyles();
    updateMockDeviceStatus();
});

// ===== UPDATE MOCK DEVICE STATUS =====
function updateMockDeviceStatus() {
    // Update Helmet Module
    const helmetBattery = document.querySelector('.status-card:nth-child(1) .battery-level');
    if (helmetBattery) {
        helmetBattery.style.width = mockData.devices.helmet.battery + '%';
        helmetBattery.textContent = mockData.devices.helmet.battery + '%';
    }

    // Update Footwear Module
    const footwearBattery = document.querySelector('.status-card:nth-child(2) .battery-level');
    if (footwearBattery) {
        footwearBattery.style.width = mockData.devices.footwear.battery + '%';
        footwearBattery.textContent = mockData.devices.footwear.battery + '%';
    }
}

// ===== CHART INITIALIZATION =====
function initializeCharts() {
    // Temperature Chart
    const tempCtx = document.getElementById('tempChart');
    if (tempCtx) {
        new Chart(tempCtx, {
            type: 'line',
            data: {
                labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00'],
                datasets: [{
                    label: 'Temperature (¬∞C)',
                    data: [22, 24, 26, 28.5, 27, 25],
                    borderColor: '#e74c3c',
                    backgroundColor: 'rgba(231, 76, 60, 0.1)',
                    borderWidth: 2,
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    y: { beginAtZero: false, grid: { color: 'rgba(255, 255, 255, 0.1)' } },
                    x: { grid: { display: false } }
                }
            }
        });
    }

    // Humidity Chart
    const humidityCtx = document.getElementById('humidityChart');
    if (humidityCtx) {
        new Chart(humidityCtx, {
            type: 'line',
            data: {
                labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00'],
                datasets: [{
                    label: 'Humidity (%)',
                    data: [55, 60, 65, 65, 62, 58],
                    borderColor: '#00d4ff',
                    backgroundColor: 'rgba(0, 212, 255, 0.1)',
                    borderWidth: 2,
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    y: { beginAtZero: false, max: 100, grid: { color: 'rgba(255, 255, 255, 0.1)' } },
                    x: { grid: { display: false } }
                }
            }
        });
    }

    // Gas Level Chart
    const gasCtx = document.getElementById('gasChart');
    if (gasCtx) {
        new Chart(gasCtx, {
            type: 'bar',
            data: {
                labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00'],
                datasets: [{
                    label: 'Gas Level (ppm)',
                    data: [10, 15, 8, 12, 18, 11],
                    backgroundColor: ['#6bcf7f', '#6bcf7f', '#6bcf7f', '#6bcf7f', '#ffd93d', '#6bcf7f'],
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    y: { beginAtZero: true, grid: { color: 'rgba(255, 255, 255, 0.1)' } },
                    x: { grid: { display: false } }
                }
            }
        });
    }

    // Metal Detection Chart
    const metalCtx = document.getElementById('metalChart');
    if (metalCtx) {
        new Chart(metalCtx, {
            type: 'doughnut',
            data: {
                labels: ['No Detection', 'Detection'],
                datasets: [{
                    data: [95, 5],
                    backgroundColor: ['#6bcf7f', '#ff6b6b'],
                    borderColor: '#0f1627',
                    borderWidth: 3
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: { color: '#a8c5e8', padding: 15 }
                    }
                }
            }
        });
    }
}

// ===== REAL-TIME UPDATES WITH MOCK DATA =====
function startRealTimeUpdates() {
    // Update sensor data more frequently for real-time feel
    setInterval(updateSensorData, 2500);
    setInterval(simulateBatteryDrain, 30000);
    setInterval(simulateRandomAlerts, 45000);
    addStreamingIndicator();
}

function updateSensorData() {
    // Simulate temperature variation
    mockData.sensors.temperature = parseFloat((mockData.sensors.temperature + (Math.random() - 0.5) * 2).toFixed(1));
    mockData.sensors.temperature = Math.max(20, Math.min(35, mockData.sensors.temperature));
    
    const tempValue = document.getElementById('temp-value');
    tempValue.textContent = mockData.sensors.temperature + '¬∞C';

    // Simulate humidity variation
    mockData.sensors.humidity = Math.max(30, Math.min(90, mockData.sensors.humidity + Math.random() * 4 - 2));
    
    const humidityValue = document.getElementById('humidity-value');
    humidityValue.textContent = Math.round(mockData.sensors.humidity) + '%';

    // Simulate gas level variation
    mockData.sensors.gasLevel = parseFloat((Math.random() * 25).toFixed(1));
    
    const gasValue = document.getElementById('gas-value');
    gasValue.textContent = mockData.sensors.gasLevel < 20 ? 'Safe' : 'Warning';
    gasValue.style.color = mockData.sensors.gasLevel < 20 ? '#6bcf7f' : '#ffd93d';

    // Simulate metal detection
    mockData.sensors.metalDetection = Math.random() > 0.95;
    
    const metalValue = document.getElementById('metal-value');
    metalValue.textContent = mockData.sensors.metalDetection ? 'Detected!' : 'No Detection';
    metalValue.style.color = mockData.sensors.metalDetection ? '#ff6b6b' : '#6bcf7f';
}

function simulateBatteryDrain() {
    // Simulate battery drain
    mockData.devices.helmet.battery = Math.max(10, mockData.devices.helmet.battery - Math.random() * 2);
    mockData.devices.footwear.battery = Math.max(10, mockData.devices.footwear.battery - Math.random() * 2);
    
    updateMockDeviceStatus();
    
    // Alert if battery low
    if (mockData.devices.helmet.battery < 20) {
        showNotification('üîã Helmet battery low! (' + Math.round(mockData.devices.helmet.battery) + '%)', 'warning');
    }
    if (mockData.devices.footwear.battery < 20) {
        showNotification('üîã Footwear battery low! (' + Math.round(mockData.devices.footwear.battery) + '%)', 'warning');
    }
}

function simulateRandomAlerts() {
    const alertTypes = [
        { text: '‚ö†Ô∏è METAL DETECTED', location: 'Footwear Module' },
        { text: '‚ö° HIGH TEMPERATURE', location: 'Helmet Module' },
        { text: 'üí® GAS SPIKE DETECTED', location: 'Footwear Module' },
        { text: 'üì∏ EMERGENCY PHOTO', location: 'ESP32-CAM' }
    ];
    
    if (Math.random() > 0.7) {
        const alert = alertTypes[Math.floor(Math.random() * alertTypes.length)];
        addNewAlert(alert.text, alert.location);
        showNotification('üö® New Alert: ' + alert.text, 'warning');
    }
}

function addNewAlert(alertType, location) {
    const alertHistory = document.querySelector('.alert-history');
    if (!alertHistory) return;

    const now = new Date();
    const timeStr = now.getHours().toString().padStart(2, '0') + ':' + 
                    now.getMinutes().toString().padStart(2, '0') + ':' + 
                    now.getSeconds().toString().padStart(2, '0');

    const alertItem = document.createElement('div');
    alertItem.className = 'alert-item warning';
    alertItem.innerHTML = `
        <span class="alert-time">${timeStr}</span>
        <span class="alert-type">${alertType}</span>
        <span class="alert-location">${location}</span>
    `;

    alertHistory.insertBefore(alertItem, alertHistory.firstChild);

    // Keep only last 10 alerts
    const alerts = alertHistory.querySelectorAll('.alert-item');
    if (alerts.length > 10) {
        alerts[alerts.length - 1].remove();
    }
}

// ===== ACTION HANDLERS =====
function requestPhoto() {
    showNotification('üì∏ Photo request sent...', 'info');
    setTimeout(() => {
        showNotification('‚úÖ Photo captured! Image ID: ' + Math.random().toString(36).substr(2, 9), 'success');
        addNewAlert('üì∏ PHOTO CAPTURED', 'ESP32-CAM');
    }, 1500);
}

function testBuzzer() {
    showNotification('üîî Testing buzzer...', 'info');
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    const oscillator = audioContext.createOscillator();
    const gainNode = audioContext.createGain();
    oscillator.connect(gainNode);
    gainNode.connect(audioContext.destination);
    oscillator.frequency.value = 800;
    oscillator.type = 'sine';
    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
    oscillator.start(audioContext.currentTime);
    oscillator.stop(audioContext.currentTime + 0.5);
    setTimeout(() => {
        showNotification('‚úÖ Buzzer test completed!', 'success');
    }, 500);
}

function startMonitoring() {
    showNotification('‚ñ∂Ô∏è Monitoring started...', 'info');
    setTimeout(() => {
        showNotification('‚úÖ All sensors active and streaming!', 'success');
        mockData.systemHealth.status = 'ACTIVE';
    }, 1000);
}

function stopMonitoring() {
    showNotification('‚èπÔ∏è Monitoring stopped...', 'warning');
    setTimeout(() => {
        showNotification('‚úÖ Data saved successfully!', 'success');
        mockData.systemHealth.status = 'IDLE';
    }, 1000);
}

// ===== ADVANCED FEATURES =====
function systemTest() {
    showNotification('‚öôÔ∏è Running comprehensive system test...', 'info');
    let testProgress = 0;
    const testInterval = setInterval(() => {
        testProgress += 25;
        if (testProgress >= 100) {
            clearInterval(testInterval);
            showNotification('‚úÖ System test passed! All components OK.', 'success');
            addNewAlert('‚úÖ SYSTEM TEST PASSED', 'All Modules');
        }
    }, 500);
}

function downloadReport() {
    showNotification('üì• Generating report...', 'info');
    setTimeout(() => {
        const report = generateReportWithMockData();
        downloadFile(report, 'AEGIS_Report_' + new Date().toISOString().slice(0, 10) + '.txt');
        showNotification('‚úÖ Report downloaded successfully!', 'success');
    }, 1500);
}

function exportLogs() {
    showNotification('üì§ Exporting system logs...', 'info');
    setTimeout(() => {
        const logs = generateLogsWithMockData();
        downloadFile(logs, 'AEGIS_Logs_' + new Date().toISOString().slice(0, 10) + '.log');
        showNotification('‚úÖ Logs exported successfully!', 'success');
    }, 1000);
}

function clearAlerts() {
    const alertHistory = document.querySelector('.alert-history');
    if (alertHistory) {
        alertHistory.innerHTML = '<p style="text-align: center; color: #bdc3c7; padding: 20px;">No alerts at this time.</p>';
        showNotification('‚úÖ Alert history cleared!', 'success');
    }
}

// ===== DATA GENERATORS WITH MOCK DATA =====
function generateReportWithMockData() {
    const date = new Date().toISOString();
    return `
AEGIS SYSTEM REPORT
Generated: ${date}

=== SYSTEM STATUS ===
Overall Status: ${mockData.systemHealth.status}
Helmet Module: ONLINE (Battery: ${Math.round(mockData.devices.helmet.battery)}%)
Footwear Module: ONLINE (Battery: ${Math.round(mockData.devices.footwear.battery)}%)
Detection Accuracy: ${mockData.systemHealth.detectionRate}%
Response Time: ${mockData.systemHealth.responseTime} seconds
Uptime: ${mockData.systemHealth.uptime}%

=== CURRENT SENSOR DATA ===
Temperature: ${mockData.sensors.temperature}¬∞C
Humidity: ${Math.round(mockData.sensors.humidity)}%
Gas Level: ${mockData.sensors.gasLevel} ppm (${mockData.sensors.gasLevel < 20 ? 'Safe' : 'Warning'})
Metal Detection: ${mockData.sensors.metalDetection ? 'ACTIVE' : 'No Detection'}

=== DEVICE INFORMATION ===
Helmet Device ID: ${mockData.devices.helmet.deviceId}
Helmet Connection: ${mockData.devices.helmet.connection.signal}% ${mockData.devices.helmet.connection.type}
Helmet Last Update: ${mockData.devices.helmet.lastUpdate}

Footwear Device ID: ${mockData.devices.footwear.deviceId}
Footwear Connection: ${mockData.devices.footwear.connection.signal}% ${mockData.devices.footwear.connection.type}
Footwear Last Update: ${mockData.devices.footwear.lastUpdate}

=== RECENT ALERTS ===
${mockData.alerts.slice(0, 5).map(a => `- ${a.time} - ${a.type} (${a.location})`).join('\n')}

=== PERFORMANCE METRICS ===
Detection Depth: 15cm (Metal)
Detection Radius: 25-30cm (Gas)
Mesh Network: Connected
Backup System: Ready

=== RECOMMENDATIONS ===
- Battery levels acceptable
- All sensors calibrated
- System operating normally
- Recommended maintenance: Check connections weekly

Report End
    `;
}

function generateLogsWithMockData() {
    const logs = [];
    const now = new Date();
    
    logs.push(`[${now.toISOString()}] System report generated`);
    logs.push(`[${new Date(now - 60000).toISOString()}] Sensor calibration completed`);
    logs.push(`[${new Date(now - 120000).toISOString()}] Battery status: Helmet ${Math.round(mockData.devices.helmet.battery)}%, Footwear ${Math.round(mockData.devices.footwear.battery)}%`);
    logs.push(`[${new Date(now - 180000).toISOString()}] Temperature: ${mockData.sensors.temperature}¬∞C`);
    logs.push(`[${new Date(now - 240000).toISOString()}] Humidity: ${Math.round(mockData.sensors.humidity)}%`);
    logs.push(`[${new Date(now - 300000).toISOString()}] Gas level: ${mockData.sensors.gasLevel} ppm`);
    logs.push(`[${new Date(now - 360000).toISOString()}] Data transmitted to server successfully`);
    logs.push(`[${new Date(now - 420000).toISOString()}] Network status: Connected`);
    logs.push(`[${new Date(now - 480000).toISOString()}] All modules operational`);
    logs.push(`[${new Date(now - 540000).toISOString()}] System health: HEALTHY`);
    
    for (let i = 0; i < 10; i++) {
        const time = new Date(now.getTime() - (600000 + i * 60000));
        const events = [
            `Sensor reading - Temp: ${(20 + Math.random() * 10).toFixed(1)}¬∞C`,
            'Data sync with server',
            `Battery check - Levels OK`,
            'Signal strength: Strong',
            'Network: Stable'
        ];
        logs.push(`[${time.toISOString()}] ${events[Math.floor(Math.random() * events.length)]}`);
    }
    
    return logs.join('\n');
}

function downloadFile(content, filename) {
    const element = document.createElement('a');
    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(content));
    element.setAttribute('download', filename);
    element.style.display = 'none';
    document.body.appendChild(element);
    element.click();
    document.body.removeChild(element);
}

// ===== NOTIFICATION SYSTEM =====
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    notification.textContent = message;
    notification.style.cssText = `
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: ${type === 'success' ? '#2ecc71' : type === 'warning' ? '#f39c12' : '#3498db'};
        color: white;
        padding: 16px 24px;
        border-radius: 6px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        z-index: 10000;
        animation: slideIn 0.3s ease;
        font-weight: 500;
    `;

    document.body.appendChild(notification);

    setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
}

// ===== CSS ANIMATIONS =====
function addAnimationStyles() {
    const style = document.createElement('style');
    style.textContent = `
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }
    `;
    document.head.appendChild(style);
}

// ===== STREAMING INDICATOR =====
function addStreamingIndicator() {
    const indicator = document.createElement('div');
    indicator.className = 'streaming-indicator';
    indicator.style.cssText = `
        position: fixed;
        top: 20px;
        left: 20px;
        display: flex;
        align-items: center;
        gap: 8px;
        z-index: 999;
    `;
    
    const dot = document.createElement('div');
    dot.style.cssText = `
        width: 8px;
        height: 8px;
        background: #00d4ff;
        border-radius: 50%;
        animation: streamPulse 1.5s infinite;
        box-shadow: 0 0 10px rgba(0, 212, 255, 0.8);
    `;
    
    const text = document.createElement('span');
    text.textContent = 'Live';
    text.style.cssText = `
        font-size: 12px;
        font-weight: 600;
        color: #00d4ff;
        text-shadow: 0 0 8px rgba(0, 212, 255, 0.5);
        letter-spacing: 1px;
    `;
    
    indicator.appendChild(dot);
    indicator.appendChild(text);
    document.body.appendChild(indicator);
    
    // Add animation keyframes
    const style = document.createElement('style');
    style.textContent = `
        @keyframes streamPulse {
            0%, 100% { box-shadow: 0 0 10px rgba(0, 212, 255, 0.8); }
            50% { box-shadow: 0 0 20px rgba(0, 212, 255, 1); }
        }
    `;
    document.head.appendChild(style);
}

// ===== KEYBOARD SHORTCUTS =====
document.addEventListener('keydown', function(event) {
    // Ctrl+P to request photo
    if (event.ctrlKey && event.key === 'p') {
        event.preventDefault();
        requestPhoto();
    }
    // Ctrl+T to test buzzer
    if (event.ctrlKey && event.key === 't') {
        event.preventDefault();
        testBuzzer();
    }
    // Ctrl+S to system test
    if (event.ctrlKey && event.key === 's') {
        event.preventDefault();
        systemTest();
    }
    // Ctrl+L to export logsopti
    if (event.ctrlKey && event.key === 'l') {
        event.preventDefault();
        exportLogs();
    }
});

console.log('AEGIS Dashboard with Mock Data Simulation initialized!');
console.log('Mock Data:', mockData);
    </script>
</body>
</html>
